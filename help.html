<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hilfe - AUT Quiz</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="navbar-brand">
                <i class="fas fa-question-circle"></i> AUT Quiz - Hilfe
            </a>
            <div class="navbar-menu">
                <button class="menu-toggle" id="menuToggle" aria-label="Menü" type="button">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="menu-dropdown" id="menuDropdown">
                    <a href="index.html" class="menu-item">
                        <i class="fas fa-home"></i> Zurück zum Spiel
                    </a>
                    <a href="points.html" class="menu-item">
                        <i class="fas fa-coins"></i> Punkte
                    </a>
                    <a href="settings.html" class="menu-item">
                        <i class="fas fa-cog"></i> Einstellungen
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="container">
        <div class="card welcome-card">
            <h2><i class="fas fa-gamepad"></i> Willkommen zur Spielesammlung!</h2>
            <p>Hier findest du alle Informationen zu den verschiedenen Spielmodi und wie du sie spielst.</p>
        </div>

        <!-- Spielmodi -->
        <div class="card" style="margin-top: 1.5rem;">
            <h3><i class="fas fa-dice"></i> Spielmodi</h3>
            
            <div class="help-section">
                <h4><i class="fas fa-car"></i> Kennzeichen raten</h4>
                <p>Dir wird ein österreichisches KFZ-Kennzeichen gezeigt. Errate, zu welchem Bezirk oder Bundesland es gehört.</p>
                <ul>
                    <li>Das Kennzeichen zeigt den Bezirkscode (z.B. W für Wien, G für Graz)</li>
                    <li>Nutze den Tipp-Button für einen Hinweis zum Bundesland inkl. Wappen</li>
                </ul>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-university"></i> Hauptstädte quizzen</h4>
                <p>Teste dein Wissen über die Hauptstädte der österreichischen Bundesländer und Bezirke.</p>
                <ul>
                    <li><strong>Bundesländer:</strong> Die 9 Landeshauptstädte Österreichs</li>
                    <li><strong>Bezirke:</strong> Größere Bezirks- und Stadthauptstädte</li>
                    <li><strong>Gemischt:</strong> Kombination aus beiden</li>
                </ul>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-globe"></i> Internationale Hauptstädte</h4>
                <p>Errate die Hauptstädte von Ländern aus der ganzen Welt. Die Antworten werden in Deutsch, Englisch und der Landessprache akzeptiert.</p>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-users"></i> Einwohner vergleichen</h4>
                <p>Vergleiche zwei österreichische Städte: Welche hat mehr Einwohner?</p>
            </div>
        </div>

        <!-- Schwierigkeitsgrade -->
        <div class="card" style="margin-top: 1.5rem;">
            <h3><i class="fas fa-layer-group"></i> Schwierigkeitsgrade</h3>
            
            <div class="help-section">
                <h4><i class="fas fa-clone"></i> Quiz-Modus</h4>
                <p>Wähle die richtige Antwort aus 4 Optionen. Ideal für Einsteiger!</p>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-edit"></i> Kombiniert</h4>
                <p>Gib deine Antwort ein, aber du kannst dir auch die Optionen anzeigen lassen. Nur bei Hauptstädte-Spielen verfügbar.</p>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-keyboard"></i> Profi-Modus</h4>
                <p>Tippe die Antwort selbst ein – ohne Hilfe! Für echte Experten.</p>
            </div>
        </div>

        <!-- Punktesystem -->
        <div class="card" style="margin-top: 1.5rem;">
            <h3><i class="fas fa-star"></i> Punktesystem</h3>
            
            <div class="help-section">
                <h4><i class="fas fa-coins"></i> Dynamische Punkte</h4>
                <p>Je weniger Tipps du verwendest, desto mehr Punkte bekommst du!</p>
                <ul>
                    <li><strong>Ohne Tipp:</strong> 100 Punkte</li>
                    <li><strong>1 Tipp verwendet:</strong> 70 Punkte</li>
                    <li><strong>2 Tipps verwendet:</strong> 40 Punkte</li>
                    <li><strong>3 Tipps verwendet:</strong> 10 Punkte</li>
                    <li><strong>Falsche Antwort:</strong> 0 Punkte</li>
                </ul>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-wallet"></i> Globales Punktekonto</h4>
                <p>Alle verdienten Punkte werden auf deinem globalen Punktekonto gesammelt. Diese Punkte bleiben auch nach Spielende erhalten!</p>
                <p>Auf der <a href="points.html">Punkte-Seite</a> kannst du deine Statistiken einsehen und bei Bedarf zurücksetzen.</p>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-shopping-cart"></i> Kostenpflichtige Tipps</h4>
                <p>In den Einstellungen kannst du "Kostenpflichtige Tipps" aktivieren. Dann kosten Tipps <strong>20 gesammelte Punkte</strong> pro Tipp.</p>
                <p>Das macht das Spiel herausfordernder – überlege gut, ob du einen Tipp wirklich brauchst!</p>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-lightbulb"></i> Tipp-System</h4>
                <p>Du hast pro Frage bis zu 3 Tipps zur Verfügung:</p>
                <ul>
                    <li><strong>Tipp 1:</strong> Allgemeiner Hinweis (z.B. Bundesland, Anfangsbuchstabe)</li>
                    <li><strong>Tipp 2:</strong> Genauerer Hinweis + Wappen bei Kennzeichen</li>
                    <li><strong>Tipp 3:</strong> Starker Hinweis (z.B. Wortanfang)</li>
                </ul>
            </div>
        </div>

        <!-- Einstellungen -->
        <div class="card" style="margin-top: 1.5rem;">
            <h3><i class="fas fa-cog"></i> Einstellungen</h3>
            
            <div class="help-section">
                <h4><i class="fas fa-spell-check"></i> Tippfehler akzeptieren</h4>
                <p>Aktiviere diese Option in den Einstellungen, um kleine Tippfehler bei der Eingabe zu tolerieren. Nützlich bei schwierigen Städtenamen!</p>
            </div>

            <div class="help-section">
                <h4><i class="fas fa-moon"></i> Dark Mode</h4>
                <p>Klicke auf das Mond-/Sonnen-Symbol oben rechts, um zwischen hellem und dunklem Design zu wechseln.</p>
            </div>
        </div>

        <!-- Zurück Button -->
        <div style="text-align: center; margin-top: 2rem;">
            <a href="index.html" class="start-btn" style="text-decoration: none; display: inline-block;">
                <i class="fas fa-play"></i> Zurück zum Spiel
            </a>
        </div>
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav" id="bottomNav">
        <div class="bottom-nav-content">
            <a href="index.html" class="bottom-nav-item">
                <i class="fas fa-home"></i>
                <span>Spiel</span>
            </a>
            <a href="points.html" class="bottom-nav-item">
                <i class="fas fa-coins"></i>
                <span>Punkte</span>
            </a>
            <a href="help.html" class="bottom-nav-item current">
                <i class="fas fa-question-circle"></i>
                <span>Hilfe</span>
            </a>
            <a href="settings.html" class="bottom-nav-item">
                <i class="fas fa-cog"></i>
                <span>Einstellungen</span>
            </a>
        </div>
    </nav>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p id="commitInfo">Version wird geladen...</p>
        </div>
    </footer>

    <script>
        // Theme aus localStorage laden
        const theme = localStorage.getItem('theme') || 'light';
        if (theme === 'dark') {
            document.body.classList.add('dark-mode');
        }
        
        // Bottom Navigation initialisieren
        const bottomNavEnabled = localStorage.getItem('bottomNavEnabled') !== 'false';
        const bottomNav = document.getElementById('bottomNav');
        if (bottomNavEnabled && bottomNav) {
            bottomNav.classList.add('active');
            document.body.classList.add('bottom-nav-enabled');
        }

        // Menu Toggle
        const menuToggle = document.getElementById('menuToggle');
        const menuDropdown = document.getElementById('menuDropdown');
        
        if (menuToggle && menuDropdown) {
            menuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                menuToggle.classList.toggle('active');
                menuDropdown.classList.toggle('show');
            });
            
            document.addEventListener('click', (e) => {
                if (!menuToggle.contains(e.target) && !menuDropdown.contains(e.target)) {
                    menuToggle.classList.remove('active');
                    menuDropdown.classList.remove('show');
                }
            });
        }

        // Settings Button
        // Commit-Info laden und anzeigen
        async function loadCommitTime() {
            const commitInfoEl = document.getElementById('commitInfo');
            
            try {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 5000);
                
                const response = await fetch(
                    'https://api.github.com/repos/ochtii/Spielesammlung/commits?per_page=1',
                    { signal: controller.signal }
                );
                clearTimeout(timeout);
                
                if (!response.ok) throw new Error('API Error');
                
                const data = await response.json();
                if (data.length > 0) {
                    const commit = data[0];
                    const commitDate = new Date(commit.commit.author.date);
                    const options = {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        timeZone: 'Europe/Vienna'
                    };
                    const formattedDate = new Intl.DateTimeFormat('de-AT', options).format(commitDate);
                    
                    const commitDetailResponse = await fetch(
                        `https://api.github.com/repos/ochtii/Spielesammlung/commits/${commit.sha}`,
                        { signal: controller.signal }
                    );
                    
                    let filesChanged = '';
                    if (commitDetailResponse.ok) {
                        const commitDetail = await commitDetailResponse.json();
                        if (commitDetail.files && commitDetail.files.length > 0) {
                            const fileNames = commitDetail.files.map(f => f.filename).slice(0, 3);
                            filesChanged = fileNames.join(', ');
                            if (commitDetail.files.length > 3) {
                                filesChanged += ` (+${commitDetail.files.length - 3})`;
                            }
                        }
                    }
                    
                    let infoText = `<i class=\"fas fa-clock\"></i> ${formattedDate}`;
                    if (filesChanged) {
                        infoText += ` <span class=\"footer-separator\">|</span> <i class=\"fas fa-file-code\"></i> ${filesChanged}`;
                    }
                    
                    commitInfoEl.innerHTML = infoText;
                    return;
                }
            } catch (error) {
                commitInfoEl.innerHTML = '<i class=\"fas fa-wifi\"></i> Offline';
            }
        }
        
        loadCommitTime();
        
        // Settings wurden auf eigene Seite ausgelagert (settings.html)
        const typoTolerance = localStorage.getItem('typoTolerance') !== 'false';
        const paidHints = localStorage.getItem('paidHints') === 'true';
        
        if (settingsBtn) {
            settingsBtn.addEventListener('click', () => {
                // Create settings modal
                let modal = document.getElementById('settingsModal');
                if (modal) modal.remove();

                const isDarkMode = document.body.classList.contains('dark-mode');

                modal = document.createElement('div');
                modal.id = 'settingsModal';
                modal.className = 'settings-modal';

                const content = document.createElement('div');
                content.className = 'settings-content';
                content.innerHTML = `
                    <div class="settings-header">
                        <h3><i class="fas fa-cog"></i> Einstellungen</h3>
                        <button class="settings-close-btn" id="settingsClose" type="button">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="settings-body">
                        <div class="settings-section">
                            <h4><i class="fas fa-palette"></i> Darstellung</h4>
                            <div class="settings-option">
                                <div class="settings-option-info">
                                    <span class="settings-option-label">Dark Mode</span>
                                    <span class="settings-option-desc">Dunkles Farbschema aktivieren</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="darkModeCheck" ${isDarkMode ? 'checked' : ''}>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h4><i class="fas fa-gamepad"></i> Spieloptionen</h4>
                            <div class="settings-option">
                                <div class="settings-option-info">
                                    <span class="settings-option-label">Tippfehler akzeptieren</span>
                                    <span class="settings-option-desc">Erlaubt kleine Abweichungen bei Antworten</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="typoToleranceCheck" ${typoTolerance ? 'checked' : ''}>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-option">
                                <div class="settings-option-info">
                                    <span class="settings-option-label">Kostenpflichtige Tipps</span>
                                    <span class="settings-option-desc">Tipps kosten 20 gesammelte Punkte</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="paidHintsCheck" ${paidHints ? 'checked' : ''}>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-footer">
                        <button id="settingsSave" class="settings-save-btn" type="button">
                            <i class="fas fa-check"></i> Speichern
                        </button>
                    </div>
                `;

                modal.appendChild(content);
                document.body.appendChild(modal);

                // Events
                document.getElementById('darkModeCheck').addEventListener('change', (e) => {
                    if (e.target.checked) {
                        document.body.classList.add('dark-mode');
                    } else {
                        document.body.classList.remove('dark-mode');
                    }
                });

                document.getElementById('settingsClose').addEventListener('click', () => modal.remove());
                
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.remove();
                });

                document.getElementById('settingsSave').addEventListener('click', () => {
                    const darkMode = document.getElementById('darkModeCheck').checked;
                    const typoTol = document.getElementById('typoToleranceCheck').checked;
                    const paidH = document.getElementById('paidHintsCheck').checked;
                    
                    localStorage.setItem('theme', darkMode ? 'dark' : 'light');
                    localStorage.setItem('typoTolerance', typoTol);
                    localStorage.setItem('paidHints', paidH);
                    
                    modal.remove();
                });

                // Close menu
                menuToggle.classList.remove('active');
                menuDropdown.classList.remove('show');
            });
        }
    </script>
</body>
</html>