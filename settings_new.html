
<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Einstellungen</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="css/variables.css">
	<link rel="stylesheet" href="css/main.css?v=20260109">
	<link rel="stylesheet" href="css/settings_new.css">
</head>
<body>
	<!-- Navbar -->
	<nav class="navbar">
		<div class="navbar-content">
			<a href="index.html" class="navbar-brand">
				<i class="fas fa-map-location-dot"></i> AUT Quiz
			</a>
			<div class="navbar-menu">
				<button class="menu-toggle" id="menuToggle" aria-label="Menü" type="button">
					<i class="fas fa-bars"></i>
				</button>
				<div class="menu-dropdown" id="menuDropdown">
					<a href="points.html" class="menu-item">
						<i class="fas fa-coins"></i> <span>Punkte: <span id="menuPointsDisplay">0</span></span>
					</a>
					<a href="help.html" class="menu-item">
						<i class="fas fa-question-circle"></i> Hilfe
					</a>
					<a href="faq.html" class="menu-item">
						<i class="fas fa-circle-question"></i> FAQ
					</a>
					<a href="stats.html" class="menu-item">
						<i class="fas fa-chart-bar"></i> Statistik
					</a>
					<a href="settings_new.html" class="menu-item">
						<i class="fas fa-cog"></i> Einstellungen
					</a>
				</div>
			</div>
		</div>
	</nav>

	<main class="container">
		<h1 class="settings-title"><i class="fas fa-cog"></i> Einstellungen</h1>
		<div class="settings-tabs">
			<button class="tab-btn active" data-tab="general">Allgemein</button>
			<button class="tab-btn" data-tab="appearance">Erscheinung</button>
			<button class="tab-btn" data-tab="game">Spieloptionen</button>
			<button class="tab-btn" data-tab="accessibility">Barrierefreiheit</button>
			<button class="tab-btn" data-tab="developer">Entwickler</button>
			<button class="tab-btn danger-tab" data-tab="danger">⚠️ Gefahrenzone</button>
		</div>
		<div class="settings-content">
			<div class="tab-panel active" id="general">
				<div class="settings-card">
					<section class="settings-section">
						<h2><i class="fas fa-language"></i> Sprache</h2>
						<label for="language-select">Sprache wählen:</label>
						<select id="language-select">
							<option value="de">Deutsch</option>
							<option value="en">English</option>
						</select>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-volume-up"></i> Sound</h2>
						<label class="switch">
							<input type="checkbox" id="sound-toggle">
							<span class="slider round"></span>
						</label>
						<span id="sound-status">Sound ist aus</span>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-bell"></i> Benachrichtigungen</h2>
						<label class="switch">
							<input type="checkbox" id="notifications-toggle">
							<span class="slider round"></span>
						</label>
						<span id="notifications-status">Benachrichtigungen sind aus</span>
					</section>
				</div>
			</div>
			<div class="tab-panel" id="appearance">
				<div class="settings-card">
					<section class="settings-section">
						<h2><i class="fas fa-palette"></i> Design</h2>
						<label for="theme-select">Farbschema:</label>
						<select id="theme-select">
							<option value="light">Hell</option>
							<option value="dark">Dunkel</option>
							<option value="auto">Automatisch</option>
						</select>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-paint-brush"></i> Akzentfarbe</h2>
						<label for="accent-color-picker">Akzentfarbe wählen:</label>
						<input type="color" id="accent-color-picker" value="#ed2939">
						<div class="color-preview">
							<span>Diese Farbe wird für Buttons und Hervorhebungen verwendet.</span>
						</div>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-font"></i> Schriftgröße</h2>
						<label for="font-size-slider">Schriftgröße: <span id="font-size-value">100%</span></label>
						<input type="range" id="font-size-slider" min="80" max="150" step="5" value="100">
						<div class="slider-info">
							<span>80%</span>
							<span>100%</span>
							<span>150%</span>
						</div>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-magic"></i> Animationen</h2>
						<label class="switch">
							<input type="checkbox" id="animations-toggle">
							<span class="slider round"></span>
						</label>
						<span id="animations-status">Animationen sind an</span>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-mobile-alt"></i> Bottom Navigation</h2>
						<div class="sub-section">
							<label class="switch">
								<input type="checkbox" id="bottom-nav-enabled-toggle">
								<span class="slider round"></span>
							</label>
							<span id="bottom-nav-enabled-status">Bottom Navigation ist an</span>
						</div>
						<div id="bottom-nav-elements-container" style="display: none; margin-top: 1rem;">
							<label>Anzuzeigende Elemente:</label>
							<div class="checkbox-group">
								<label class="checkbox-item">
									<input type="checkbox" id="bottom-nav-home-toggle" checked>
									<span class="checkmark"></span>
									Startseite
								</label>
								<label class="checkbox-item">
									<input type="checkbox" id="bottom-nav-points-toggle" checked>
									<span class="checkmark"></span>
									Punkte
								</label>
								<label class="checkbox-item">
									<input type="checkbox" id="bottom-nav-help-toggle" checked>
									<span class="checkmark"></span>
									Hilfe
								</label>
								<label class="checkbox-item">
									<input type="checkbox" id="bottom-nav-faq-toggle">
									<span class="checkmark"></span>
									FAQ
								</label>
								<label class="checkbox-item">
									<input type="checkbox" id="bottom-nav-settings-toggle" checked>
									<span class="checkmark"></span>
									Einstellungen
								</label>
							</div>
						</div>
					</section>
				</div>
			</div>
			<div class="tab-panel" id="game">
				<div class="settings-card">
					<section class="settings-section">
						<h2><i class="fas fa-clock"></i> Timer</h2>
						<label class="switch">
							<input type="checkbox" id="timer-enabled-toggle">
							<span class="slider round"></span>
						</label>
						<span id="timer-enabled-status">Timer ist aus</span>
						<div id="timer-duration-container" style="display: none; margin-top: 1rem;">
							<label for="timer-duration-select">Timer-Dauer (Sekunden):</label>
							<select id="timer-duration-select">
								<option value="15">15</option>
								<option value="30">30</option>
								<option value="45">45</option>
								<option value="60">60</option>
							</select>
						</div>
						<div id="timer-visual-container" style="display: none; margin-top: 1rem;">
							<label class="switch">
								<input type="checkbox" id="timer-visual-toggle">
								<span class="slider round"></span>
							</label>
							<span id="timer-visual-status">Visueller Timer ist an</span>
						</div>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-map-marker-alt"></i> Hauptstadt-Modus</h2>
						<label for="capital-mode-select">Standard-Modus:</label>
						<select id="capital-mode-select">
							<option value="all">Alle Hauptstädte</option>
							<option value="federal">Bundesländer-Hauptstädte</option>
							<option value="district">Bezirkshauptstädte</option>
						</select>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-coins"></i> Punkte-Anzeige</h2>
						<label for="balance-display-select">Anzeige-Modus:</label>
						<select id="balance-display-select">
							<option value="widget">Widget</option>
							<option value="header">Im Header</option>
						</select>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-tools"></i> Entwickler-Tools</h2>
						
						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="devTimerEnabled">
								<span class="slider round"></span>
							</label>
							<span>Timer aktivieren</span>
						</div>
						
						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="devTypoTolerance">
								<span class="slider round"></span>
							</label>
							<span>Typo-Toleranz aktivieren</span>
						</div>
						
						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="devPaidHints">
								<span class="slider round"></span>
							</label>
							<span>Bezahlte Hinweise aktivieren</span>
						</div>
						
						<div class="dev-actions">
							<button id="devHardReloadBtn" class="dev-btn">
								<i class="fas fa-broom"></i> Hard Reload & Cache leeren
							</button>
							<button id="devSaveSettings" class="dev-btn">
								<i class="fas fa-save"></i> Einstellungen speichern
							</button>
						</div>
						
						<div id="devSaveFeedback" class="save-feedback" style="display: none;">
							<i class="fas fa-check"></i> Einstellungen gespeichert!
						</div>
					</section>
				</div>
			</div>
			<div class="tab-panel" id="accessibility">
				<div class="settings-card">
					<section class="settings-section">
						<h2><i class="fas fa-eye"></i> High Contrast</h2>
						<label class="switch">
							<input type="checkbox" id="contrast-toggle">
							<span class="slider round"></span>
						</label>
						<span id="contrast-status">High Contrast ist aus</span>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-mouse-pointer"></i> Reduzierte Bewegungen</h2>
						<label class="switch">
							<input type="checkbox" id="reduced-motion-toggle">
							<span class="slider round"></span>
						</label>
						<span id="reduced-motion-status">Bewegungen sind normal</span>
					</section>
					<section class="settings-section">
						<h2><i class="fas fa-volume-off"></i> Screen Reader</h2>
						<label class="switch">
							<input type="checkbox" id="screen-reader-toggle">
							<span class="slider round"></span>
						</label>
						<span id="screen-reader-status">Screen Reader ist aus</span>
					</section>
				</div>
			</div>
			<div class="tab-panel" id="developer">
				<div class="settings-card dev-tools-card">
					<section class="settings-section">
						<h2><i class="fas fa-tools"></i> Entwickler-Tools</h2>

						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="footer-settings-toggle">
								<span class="slider round"></span>
							</label>
							<span>Footer-Einstellungen anzeigen</span>
						</div>

						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="resize-button-toggle">
								<span class="slider round"></span>
							</label>
							<span>Resize-Button einblenden</span>
						</div>

						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="hard-reload-button-toggle">
								<span class="slider round"></span>
							</label>
							<span>Hard Reload Button anzeigen</span>
						</div>

						<div class="dev-option">
							<label class="switch">
								<input type="checkbox" id="debug-messages-toggle">
								<span class="slider round"></span>
							</label>
							<span>Debug-Meldungen aktivieren</span>
						</div>

						<div id="debug-settings-container" style="display: none; margin-top: 1rem;">
							<label for="debug-level-select">Debug-Level:</label>
							<select id="debug-level-select">
								<option value="error">Nur Fehler</option>
								<option value="warn">Warnungen + Fehler</option>
								<option value="info">Info + Warnungen + Fehler</option>
								<option value="debug">Alle Debug-Meldungen</option>
							</select>

							<label class="switch" style="margin-top: 1rem;">
								<input type="checkbox" id="debug-console-output-toggle">
								<span class="slider round"></span>
							</label>
							<span>Konsole-Ausgabe aktivieren</span>
						</div>

						<div class="dev-actions">
							<button id="devHardReloadBtn" class="dev-btn">
								<i class="fas fa-broom"></i> Hard Reload & Cache leeren
							</button>
							<button id="devSaveSettings" class="dev-btn">
								<i class="fas fa-save"></i> Einstellungen speichern
							</button>
						</div>

						<div id="devSaveFeedback" class="save-feedback" style="display: none;">
							<i class="fas fa-check"></i> Einstellungen gespeichert!
						</div>
					</section>
				</div>
			</div>
			<div class="tab-panel" id="danger">
				<div class="settings-card danger-card">
					<section class="settings-section">
						<h2><i class="fas fa-exclamation-triangle"></i> ⚠️ Gefahrenzone</h2>
						<p class="danger-warning">
							<strong>Achtung!</strong> Die folgenden Aktionen sind irreversibel und können nicht rückgängig gemacht werden.
							Bitte seien Sie vorsichtig bei der Verwendung dieser Funktionen.
						</p>
						
						<div class="danger-actions">
							<div class="danger-item">
								<h3><i class="fas fa-undo"></i> Fortschritt zurücksetzen</h3>
								<p>Löscht alle Punkte, gefundenen Easter Eggs und Spielstatistiken.</p>
								<button id="reset-progress-btn" class="danger-btn">
									<i class="fas fa-trash"></i> Fortschritt zurücksetzen
								</button>
							</div>
							
							<div class="danger-item">
								<h3><i class="fas fa-cog"></i> Einstellungen zurücksetzen</h3>
								<p>Setzt alle Einstellungen auf Standardwerte zurück.</p>
								<button id="reset-btn" class="danger-btn">
									<i class="fas fa-undo"></i> Einstellungen zurücksetzen
								</button>
							</div>
							
							<div class="danger-item">
								<h3><i class="fas fa-broom"></i> Cache leeren & Hard Reload</h3>
								<p>Leert den Browser-Cache und lädt die Seite komplett neu.</p>
								<button id="devHardReloadBtn" class="danger-btn">
									<i class="fas fa-broom"></i> Cache leeren & neu laden
								</button>
							</div>
						</div>
					</section>
				</div>
			</div>
		</div>
	</main>

	<!-- Bottom Navigation (Mobile) -->
	<nav class="bottom-nav" id="bottomNav">
		<div class="bottom-nav-content">
			<a href="index.html" class="bottom-nav-item" data-nav="home">
				<i class="fas fa-home"></i>
				<span>Spiel</span>
			</a>
			<a href="points.html" class="bottom-nav-item" data-nav="points">
				<i class="fas fa-coins"></i>
				<span>Punkte</span>
				<span class="bottom-nav-badge" id="bottomNavPoints">0</span>
			</a>
			<a href="help.html" class="bottom-nav-item" data-nav="help">
				<i class="fas fa-question-circle"></i>
				<span>Hilfe</span>
			</a>
			<a href="faq.html" class="bottom-nav-item" data-nav="faq">
				<i class="fas fa-circle-question"></i>
				<span>FAQ</span>
			</a>
			<a href="settings_new.html" class="bottom-nav-item current" data-nav="settings">
				<i class="fas fa-cog"></i>
				<span>Einstellungen</span>
			</a>
		</div>
	</nav>

	<!-- Footer Container - wird durch footer.js geladen -->
	<div id="footer-container"></div>

	<script src="components/footer.js"></script>
	<script src="script.js"></script>
	<script>
	// Settings-Initialisierung in EINEM DOMContentLoaded-Block
	document.addEventListener('DOMContentLoaded', function() {

	    // Theme
	    const themeSelect = document.getElementById('theme-select');
	    function applyTheme(theme) {
	        document.body.classList.remove('light-mode', 'dark-mode');
	        if (theme === 'auto') {
	            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
	            document.body.classList.add(prefersDark ? 'dark-mode' : 'light-mode');
	        } else {
	            document.body.classList.add(theme + '-mode');
	        }
	        localStorage.setItem('theme', theme);
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    const savedTheme = localStorage.getItem('theme') || 'light';
	    themeSelect.value = savedTheme;
	    applyTheme(savedTheme);
	    themeSelect.addEventListener('change', (e) => {
	        applyTheme(e.target.value);
	    });

	    // Sprache
	    const languageSelect = document.getElementById('language-select');
	    function applyLanguage(lang) {
	        localStorage.setItem('language', lang);
	        // Platzhalter für spätere Übersetzungsfunktion
	    }
	    const savedLang = localStorage.getItem('language') || 'de';
	    languageSelect.value = savedLang;
	    languageSelect.addEventListener('change', (e) => {
	        applyLanguage(e.target.value);
	    });

	    // Schriftgröße
	    const fontSizeSlider = document.getElementById('font-size-slider');
	    const fontSizeValue = document.getElementById('font-size-value');
	    function applyFontSize(scale) {
	        const scaleValue = scale / 100;
	        document.documentElement.style.setProperty('--font-scale', scaleValue);
	        localStorage.setItem('fontScale', scale);
	        fontSizeValue.textContent = scale + '%';
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    const savedFontScale = localStorage.getItem('fontScale') || '100';
	    fontSizeSlider.value = savedFontScale;
	    applyFontSize(savedFontScale);
	    fontSizeSlider.addEventListener('input', (e) => {
	        applyFontSize(e.target.value);
	    });

	    // Sound
	    const soundToggle = document.getElementById('sound-toggle');
	    const soundStatus = document.getElementById('sound-status');
	    function updateSoundStatus() {
	        const enabled = soundToggle.checked;
	        soundStatus.textContent = enabled ? 'Sound ist an' : 'Sound ist aus';
	        soundStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('soundEnabled', enabled ? 'true' : 'false');
	    }
	    soundToggle.checked = localStorage.getItem('soundEnabled') === 'true';
	    updateSoundStatus();
	    soundToggle.addEventListener('change', updateSoundStatus);

	    // Benachrichtigungen
	    const notificationsToggle = document.getElementById('notifications-toggle');
	    const notificationsStatus = document.getElementById('notifications-status');
	    function updateNotificationStatus() {
	        const enabled = notificationsToggle.checked;
	        notificationsStatus.textContent = enabled ? 'Benachrichtigungen sind an' : 'Benachrichtigungen sind aus';
	        notificationsStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('notificationsEnabled', enabled ? 'true' : 'false');
	    }
	    notificationsToggle.checked = localStorage.getItem('notificationsEnabled') === 'true';
	    updateNotificationStatus();
	    notificationsToggle.addEventListener('change', updateNotificationStatus);

	    // Neue Entwickler-Tools
	    // Footer Settings Toggle
	    const footerSettingsToggle = document.getElementById('footer-settings-toggle');
	    function updateFooterSettingsStatus() {
	        const enabled = footerSettingsToggle.checked;
	        localStorage.setItem('footerSettingsEnabled', enabled ? 'true' : 'false');
	        // Hier könnte Footer-Logik implementiert werden
	    }
	    footerSettingsToggle.checked = localStorage.getItem('footerSettingsEnabled') === 'true';
	    updateFooterSettingsStatus();
	    footerSettingsToggle.addEventListener('change', updateFooterSettingsStatus);

	    // Resize Button Toggle
	    const resizeButtonToggle = document.getElementById('resize-button-toggle');
	    function updateResizeButtonStatus() {
	        const enabled = resizeButtonToggle.checked;
	        localStorage.setItem('resizeButtonEnabled', enabled ? 'true' : 'false');
	        // Hier könnte Resize-Button Logik implementiert werden
	    }
	    resizeButtonToggle.checked = localStorage.getItem('resizeButtonEnabled') === 'true';
	    updateResizeButtonStatus();
	    resizeButtonToggle.addEventListener('change', updateResizeButtonStatus);

	    // Hard Reload Button Toggle
	    const hardReloadButtonToggle = document.getElementById('hard-reload-button-toggle');
	    function updateHardReloadButtonStatus() {
	        const enabled = hardReloadButtonToggle.checked;
	        localStorage.setItem('hardReloadButtonEnabled', enabled ? 'true' : 'false');
	        // Hier könnte Hard Reload Button Logik implementiert werden
	    }
	    hardReloadButtonToggle.checked = localStorage.getItem('hardReloadButtonEnabled') === 'true';
	    updateHardReloadButtonStatus();
	    hardReloadButtonToggle.addEventListener('change', updateHardReloadButtonStatus);

	    // Debug Messages Toggle
	    const debugMessagesToggle = document.getElementById('debug-messages-toggle');
	    const debugSettingsContainer = document.getElementById('debug-settings-container');
	    function updateDebugMessagesStatus() {
	        const enabled = debugMessagesToggle.checked;
	        localStorage.setItem('debugMessagesEnabled', enabled ? 'true' : 'false');
	        debugSettingsContainer.style.display = enabled ? 'block' : 'none';
	    }
	    debugMessagesToggle.checked = localStorage.getItem('debugMessagesEnabled') === 'true';
	    updateDebugMessagesStatus();
	    debugMessagesToggle.addEventListener('change', updateDebugMessagesStatus);

	    // Debug Level Select
	    const debugLevelSelect = document.getElementById('debug-level-select');
	    function applyDebugLevel(level) {
	        localStorage.setItem('debugLevel', level);
	    }
	    const savedDebugLevel = localStorage.getItem('debugLevel') || 'error';
	    debugLevelSelect.value = savedDebugLevel;
	    debugLevelSelect.addEventListener('change', (e) => {
	        applyDebugLevel(e.target.value);
	    });

	    // Debug Console Output Toggle
	    const debugConsoleOutputToggle = document.getElementById('debug-console-output-toggle');
	    function updateDebugConsoleOutputStatus() {
	        const enabled = debugConsoleOutputToggle.checked;
	        localStorage.setItem('debugConsoleOutputEnabled', enabled ? 'true' : 'false');
	    }
	    debugConsoleOutputToggle.checked = localStorage.getItem('debugConsoleOutputEnabled') === 'true';
	    updateDebugConsoleOutputStatus();
	    debugConsoleOutputToggle.addEventListener('change', updateDebugConsoleOutputStatus);

	    // Save Developer Settings
	    const saveDevSettingsBtn = document.getElementById('devSaveSettings');
	    const saveFeedback = document.getElementById('devSaveFeedback');
	    saveDevSettingsBtn.addEventListener('click', () => {
	        // Alle Entwickler-Einstellungen sind bereits in localStorage gespeichert
	        // Zeige Feedback an
	        saveFeedback.style.display = 'block';
	        setTimeout(() => {
	            saveFeedback.style.display = 'none';
	        }, 2000);
	    });

	    // Tab-Funktionalität
	    const tabBtns = document.querySelectorAll('.tab-btn');
	    const tabPanels = document.querySelectorAll('.tab-panel');
	    tabBtns.forEach(btn => {
	        btn.addEventListener('click', () => {
	            const targetTab = btn.dataset.tab;
	            tabBtns.forEach(b => b.classList.remove('active'));
	            tabPanels.forEach(p => p.classList.remove('active'));
	            btn.classList.add('active');
	            document.getElementById(targetTab).classList.add('active');
	            localStorage.setItem('activeTab', targetTab);
	        });
	    });
	    // Aktiven Tab wiederherstellen
	    const savedTab = localStorage.getItem('activeTab') || 'general';
	    document.querySelector(`[data-tab="${savedTab}"]`).classList.add('active');
	    document.getElementById(savedTab).classList.add('active');

	    // Animationen
	    const animationsToggle = document.getElementById('animations-toggle');
	    const animationsStatus = document.getElementById('animations-status');
	    function updateAnimationsStatus() {
	        const enabled = animationsToggle.checked;
	        animationsStatus.textContent = enabled ? 'Animationen sind an' : 'Animationen sind aus';
	        animationsStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('animationsEnabled', enabled ? 'true' : 'false');
	        document.body.classList.toggle('no-animations', !enabled);
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    animationsToggle.checked = localStorage.getItem('animationsEnabled') !== 'false';
	    updateAnimationsStatus();
	    animationsToggle.addEventListener('change', updateAnimationsStatus);

	    // Akzentfarbe
	    const accentColorPicker = document.getElementById('accent-color-picker');
	    function applyAccentColor(color) {
	        document.documentElement.style.setProperty('--accent-color', color);
	        document.documentElement.style.setProperty('--primary-color', color);
	        localStorage.setItem('accentColor', color);
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    const savedAccentColor = localStorage.getItem('accentColor') || '#ed2939';
	    accentColorPicker.value = savedAccentColor;
	    applyAccentColor(savedAccentColor);
	    accentColorPicker.addEventListener('input', (e) => {
	        applyAccentColor(e.target.value);
	    });

	    // Bottom Navigation
	    const bottomNavEnabledToggle = document.getElementById('bottom-nav-enabled-toggle');
	    const bottomNavEnabledStatus = document.getElementById('bottom-nav-enabled-status');
	    const bottomNavElementsContainer = document.getElementById('bottom-nav-elements-container');
	    function updateBottomNavEnabledStatus() {
	        const enabled = bottomNavEnabledToggle.checked;
	        bottomNavEnabledStatus.textContent = enabled ? 'Bottom Navigation ist an' : 'Bottom Navigation ist aus';
	        bottomNavEnabledStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('bottomNavEnabled', enabled ? 'true' : 'false');
	        document.body.classList.toggle('bottom-nav-enabled', enabled);
	        bottomNavElementsContainer.style.display = enabled ? 'block' : 'none';
	        if (window.applyBottomNavSettings) window.applyBottomNavSettings();
	    }
	    bottomNavEnabledToggle.checked = localStorage.getItem('bottomNavEnabled') !== 'false';
	    updateBottomNavEnabledStatus();
	    bottomNavEnabledToggle.addEventListener('change', updateBottomNavEnabledStatus);

	    // Bottom Nav Elemente
	    const bottomNavHomeToggle = document.getElementById('bottom-nav-home-toggle');
	    const bottomNavPointsToggle = document.getElementById('bottom-nav-points-toggle');
	    const bottomNavHelpToggle = document.getElementById('bottom-nav-help-toggle');
	    const bottomNavFaqToggle = document.getElementById('bottom-nav-faq-toggle');
	    const bottomNavSettingsToggle = document.getElementById('bottom-nav-settings-toggle');

	    function updateBottomNavElements() {
	        const showHome = bottomNavHomeToggle.checked;
	        const showPoints = bottomNavPointsToggle.checked;
	        const showHelp = bottomNavHelpToggle.checked;
	        const showFaq = bottomNavFaqToggle.checked;
	        const showSettings = bottomNavSettingsToggle.checked;

	        localStorage.setItem('bottomNavShowHome', showHome ? 'true' : 'false');
	        localStorage.setItem('bottomNavShowPoints', showPoints ? 'true' : 'false');
	        localStorage.setItem('bottomNavShowHelp', showHelp ? 'true' : 'false');
	        localStorage.setItem('bottomNavShowFaq', showFaq ? 'true' : 'false');
	        localStorage.setItem('bottomNavShowSettings', showSettings ? 'true' : 'false');

	        // Bottom Navigation sofort aktualisieren
	        if (window.applyBottomNavSettings) window.applyBottomNavSettings();
	    }

	    // Lade gespeicherte Werte
	    bottomNavHomeToggle.checked = localStorage.getItem('bottomNavShowHome') !== 'false';
	    bottomNavPointsToggle.checked = localStorage.getItem('bottomNavShowPoints') !== 'false';
	    bottomNavHelpToggle.checked = localStorage.getItem('bottomNavShowHelp') !== 'false';
	    bottomNavFaqToggle.checked = localStorage.getItem('bottomNavShowFaq') === 'true';
	    bottomNavSettingsToggle.checked = localStorage.getItem('bottomNavShowSettings') !== 'false';

	    // Event Listener
	    bottomNavHomeToggle.addEventListener('change', updateBottomNavElements);
	    bottomNavPointsToggle.addEventListener('change', updateBottomNavElements);
	    bottomNavHelpToggle.addEventListener('change', updateBottomNavElements);
	    bottomNavFaqToggle.addEventListener('change', updateBottomNavElements);
	    bottomNavSettingsToggle.addEventListener('change', updateBottomNavElements);

	    // High Contrast
	    const contrastToggle = document.getElementById('contrast-toggle');
	    const contrastStatus = document.getElementById('contrast-status');
	    function updateContrastStatus() {
	        const enabled = contrastToggle.checked;
	        contrastStatus.textContent = enabled ? 'High Contrast ist an' : 'High Contrast ist aus';
	        contrastStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('highContrast', enabled ? 'true' : 'false');
	        document.body.classList.toggle('high-contrast', enabled);
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    contrastToggle.checked = localStorage.getItem('highContrast') === 'true';
	    updateContrastStatus();
	    contrastToggle.addEventListener('change', updateContrastStatus);

	    // Reduzierte Bewegungen
	    const reducedMotionToggle = document.getElementById('reduced-motion-toggle');
	    const reducedMotionStatus = document.getElementById('reduced-motion-status');
	    function updateReducedMotionStatus() {
	        const enabled = reducedMotionToggle.checked;
	        reducedMotionStatus.textContent = enabled ? 'Bewegungen sind reduziert' : 'Bewegungen sind normal';
	        reducedMotionStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('reducedMotion', enabled ? 'true' : 'false');
	        document.body.classList.toggle('reduced-motion', enabled);
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    reducedMotionToggle.checked = localStorage.getItem('reducedMotion') === 'true';
	    updateReducedMotionStatus();
	    reducedMotionToggle.addEventListener('change', updateReducedMotionStatus);

	    // Screen Reader
	    const screenReaderToggle = document.getElementById('screen-reader-toggle');
	    const screenReaderStatus = document.getElementById('screen-reader-status');
	    function updateScreenReaderStatus() {
	        const enabled = screenReaderToggle.checked;
	        screenReaderStatus.textContent = enabled ? 'Screen Reader ist an' : 'Screen Reader ist aus';
	        screenReaderStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('screenReader', enabled ? 'true' : 'false');
	        document.body.classList.toggle('screen-reader-active', enabled);
	        if (window.applyGlobalSettings) window.applyGlobalSettings();
	    }
	    screenReaderToggle.checked = localStorage.getItem('screenReader') === 'true';
	    updateScreenReaderStatus();
	    screenReaderToggle.addEventListener('change', updateScreenReaderStatus);

	    // Spieloptionen
	    // Timer Enabled
	    const timerEnabledToggle = document.getElementById('timer-enabled-toggle');
	    const timerEnabledStatus = document.getElementById('timer-enabled-status');
	    const timerDurationContainer = document.getElementById('timer-duration-container');
	    const timerVisualContainer = document.getElementById('timer-visual-container');
	    function updateTimerEnabledStatus() {
	        const enabled = timerEnabledToggle.checked;
	        timerEnabledStatus.textContent = enabled ? 'Timer ist an' : 'Timer ist aus';
	        timerEnabledStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('timerEnabled', enabled ? 'true' : 'false');
	        timerDurationContainer.style.display = enabled ? 'block' : 'none';
	        timerVisualContainer.style.display = enabled ? 'block' : 'none';
	    }
	    timerEnabledToggle.checked = localStorage.getItem('timerEnabled') === 'true';
	    updateTimerEnabledStatus();
	    timerEnabledToggle.addEventListener('change', updateTimerEnabledStatus);

	    // Timer Duration
	    const timerDurationSelect = document.getElementById('timer-duration-select');
	    function applyTimerDuration(duration) {
	        localStorage.setItem('timerDuration', duration);
	    }
	    const savedTimerDuration = localStorage.getItem('timerDuration') || '30';
	    timerDurationSelect.value = savedTimerDuration;
	    timerDurationSelect.addEventListener('change', (e) => {
	        applyTimerDuration(e.target.value);
	    });

	    // Timer Visual
	    const timerVisualToggle = document.getElementById('timer-visual-toggle');
	    const timerVisualStatus = document.getElementById('timer-visual-status');
	    function updateTimerVisualStatus() {
	        const enabled = timerVisualToggle.checked;
	        timerVisualStatus.textContent = enabled ? 'Visueller Timer ist an' : 'Visueller Timer ist aus';
	        timerVisualStatus.classList.toggle('enabled', enabled);
	        localStorage.setItem('timerVisual', enabled ? 'true' : 'false');
	    }
	    timerVisualToggle.checked = localStorage.getItem('timerVisual') !== 'false';
	    updateTimerVisualStatus();
	    timerVisualToggle.addEventListener('change', updateTimerVisualStatus);

	    // Capital Mode
	    const capitalModeSelect = document.getElementById('capital-mode-select');
	    function applyCapitalMode(mode) {
	        localStorage.setItem('capitalMode', mode);
	    }
	    const savedCapitalMode = localStorage.getItem('capitalMode') || 'all';
	    capitalModeSelect.value = savedCapitalMode;
	    capitalModeSelect.addEventListener('change', (e) => {
	        applyCapitalMode(e.target.value);
	    });

	    // Balance Display Mode
	    const balanceDisplaySelect = document.getElementById('balance-display-select');
	    function applyBalanceDisplayMode(mode) {
	        localStorage.setItem('balanceDisplayMode', mode);
	    }
	    const savedBalanceDisplayMode = localStorage.getItem('balanceDisplayMode') || 'widget';
	    balanceDisplaySelect.value = savedBalanceDisplayMode;
	    balanceDisplaySelect.addEventListener('change', (e) => {
	        applyBalanceDisplayMode(e.target.value);
	    });

	    // Entwickler-Tools (jetzt in Spieloptionen)
	    // Timer Toggle
	    const devTimerToggle = document.getElementById('devTimerEnabled');
	    function updateDevTimerStatus() {
	        const enabled = devTimerToggle.checked;
	        localStorage.setItem('devTimerEnabled', enabled ? 'true' : 'false');
	    }
	    devTimerToggle.checked = localStorage.getItem('devTimerEnabled') === 'true';
	    updateDevTimerStatus();
	    devTimerToggle.addEventListener('change', updateDevTimerStatus);

	    // Typo Tolerance Toggle
	    const typoToleranceToggle = document.getElementById('devTypoTolerance');
	    function updateTypoToleranceStatus() {
	        const enabled = typoToleranceToggle.checked;
	        localStorage.setItem('typoToleranceEnabled', enabled ? 'true' : 'false');
	    }
	    typoToleranceToggle.checked = localStorage.getItem('typoToleranceEnabled') === 'true';
	    updateTypoToleranceStatus();
	    typoToleranceToggle.addEventListener('change', updateTypoToleranceStatus);

	    // Paid Hints Toggle
	    const paidHintsToggle = document.getElementById('devPaidHints');
	    function updatePaidHintsStatus() {
	        const enabled = paidHintsToggle.checked;
	        localStorage.setItem('paidHintsEnabled', enabled ? 'true' : 'false');
	    }
	    paidHintsToggle.checked = localStorage.getItem('paidHintsEnabled') === 'true';
	    updatePaidHintsStatus();
	    paidHintsToggle.addEventListener('change', updatePaidHintsStatus);



	    // ============================================
	    // GEFahrenzone - Gefährliche Funktionen
	    // ============================================

	    // Fortschritt zurücksetzen
	    const resetProgressBtn = document.getElementById('reset-progress-btn');
	    if (resetProgressBtn) {
	        function resetProgress() {
	            if (confirm('⚠️ Sind Sie sicher, dass Sie Ihren gesamten Fortschritt zurücksetzen möchten?\n\nDies löscht:\n- Alle Punkte\n- Alle gefundenen Easter Eggs\n- Alle Spielstatistiken\n\nDiese Aktion kann nicht rückgängig gemacht werden!')) {
	                localStorage.removeItem('pointsData');
	                localStorage.removeItem('foundEasterEggs');
	                localStorage.removeItem('gameStats');
	                alert('✅ Fortschritt wurde erfolgreich zurückgesetzt!');
	                location.reload();
	            }
	        }
	        resetProgressBtn.addEventListener('click', resetProgress);
	    }

	    // Einstellungen zurücksetzen
	    const resetBtn = document.getElementById('reset-btn');
	    if (resetBtn) {
	        function resetSettings() {
	            if (confirm('⚠️ Sind Sie sicher, dass Sie alle Einstellungen zurücksetzen möchten?\n\nDies setzt alle Einstellungen auf Standardwerte zurück.\n\nDiese Aktion kann nicht rückgängig gemacht werden!')) {
	                localStorage.clear();
	                alert('✅ Einstellungen wurden erfolgreich zurückgesetzt!');
	                location.reload();
	            }
	        }
	        resetBtn.addEventListener('click', resetSettings);
	    }

	    // Hard Reload & Cache leeren
	    const devHardReloadBtn = document.getElementById('devHardReloadBtn');
	    if (devHardReloadBtn) {
	        devHardReloadBtn.addEventListener('click', async (e) => {
	            e.preventDefault();
	            if (confirm('⚠️ Sind Sie sicher, dass Sie den Cache leeren und die Seite neu laden möchten?\n\nDies kann bei technischen Problemen helfen.')) {
	                devHardReloadBtn.classList.add('spinning');
	                devHardReloadBtn.disabled = true;
	                try {
	                    // Service Worker Cache leeren
	                    if ('caches' in window) {
	                        const cacheNames = await caches.keys();
	                        await Promise.all(cacheNames.map(name => caches.delete(name)));
	                    }
	                    // Service Worker deregistrieren
	                    if ('serviceWorker' in navigator) {
	                        const registrations = await navigator.serviceWorker.getRegistrations();
	                        await Promise.all(registrations.map(reg => reg.unregister()));
	                    }
	                    sessionStorage.setItem('cacheCleared', 'true');
	                    setTimeout(() => { location.reload(true); }, 500);
	                } catch (error) {
	                    console.error('Cache clear error:', error);
	                    location.reload(true);
	                }
	            }
	        });
	        // Zeige Erfolgs-Toast wenn gerade Cache geleert wurde
	        if (sessionStorage.getItem('cacheCleared') === 'true') {
	            sessionStorage.removeItem('cacheCleared');
	            showCacheClearedToast();
	        }
	    }

	    // Toast-Notification für Cache Clear
	    function showCacheClearedToast() {
	        const toast = document.createElement('div');
	        toast.className = 'cache-cleared-toast';
	        toast.innerHTML = `<i class="fas fa-check-circle"></i> <span>Cache geleert & neu geladen!</span>`;
	        document.body.appendChild(toast);
	        setTimeout(() => toast.classList.add('show'), 10);
	        setTimeout(() => {
	            toast.classList.remove('show');
	            setTimeout(() => toast.remove(), 300);
	        }, 2500);
	    }

	    // Theme Auto-Modus
	    function applyTheme(theme) {
	        document.body.classList.remove('light-mode', 'dark-mode');
	        if (theme === 'auto') {
	            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
	            document.body.classList.add(prefersDark ? 'dark-mode' : 'light-mode');
	        } else {
	            document.body.classList.add(theme + '-mode');
	        }
	        localStorage.setItem('theme', theme);
	    }
	});
	</script>
</body>
</html>
